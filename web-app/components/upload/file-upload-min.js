(function(){Alfresco.FileUpload=function(d){var c=Alfresco.util.ComponentManager.get(d);if(c!==null){throw new Error("An instance of Alfresco.FileUpload already exists.")}Alfresco.FileUpload.superclass.constructor.call(this,"Alfresco.FileUpload",d);return this};YAHOO.extend(Alfresco.FileUpload,Alfresco.component.Base,{options:{adobeFlashEnabled:true,flashUploader:"Alfresco.FlashUpload",htmlUploader:"Alfresco.HtmlUpload"},uploader:null,MODE_SINGLE_UPLOAD:1,MODE_SINGLE_UPDATE:2,MODE_MULTI_UPLOAD:3,defaultShowConfig:{siteId:null,containerId:null,destination:null,uploadDirectory:null,updateNodeRef:null,updateFilename:null,mode:this.MODE_SINGLE_UPLOAD,filter:[],onFileUploadComplete:null,overwrite:false,thumbnails:null,htmlUploadURL:null,flashUploadURL:null,username:null},showConfig:{},show:function a(c){if(this.uploader===null||(this.uploader.name==this.options.flashUploader&&!this.options.adobeFlashEnabled)){this.hasRequiredFlashPlayer=this.options.adobeFlashEnabled&&!Alfresco.util.getVar("noflash")&&Alfresco.util.hasRequiredFlashPlayer(9,0,45);if(this.hasRequiredFlashPlayer&&YAHOO.env.ua.ie==0){this.canAccessSession=(YAHOO.util.Cookie.get("JSESSIONID")||"").length>0;this.hasRequiredFlashPlayer=this.canAccessSession}var d=this.hasRequiredFlashPlayer?this.options.flashUploader:this.options.htmlUploader,e=Alfresco.util.ComponentManager.findFirst(d);if(e){this.uploader=e}else{throw new Error("No instance of uploader type '"+d+"' exists.")}}this.showConfig=YAHOO.lang.merge(this.defaultShowConfig,c);if(!this.hasRequiredFlashPlayer&&this.showConfig.mode==this.MODE_MULTI_UPLOAD){this.showConfig.mode=this.MODE_SINGLE_UPLOAD}if(this.hasRequiredFlashPlayer){this.showConfig.uploadURL=this.showConfig.flashUploadURL}else{this.showConfig.uploadURL=this.showConfig.htmlUploadURL;this.showConfig.adobeFlashEnabled=this.options.adobeFlashEnabled&&this.canAccessSession}this.uploader.show(this.showConfig)},hide:function b(){if(this.uploader===null){}else{this.uploader.hide()}}})})();Alfresco.getFileUploadInstance=function(){var a="alfresco-fileupload-instance";return Alfresco.util.ComponentManager.get(a)||new Alfresco.FileUpload(a)};Alfresco.getDNDUploadProgressInstance=function(){var b="Alfresco.DNDUpload";var a=Alfresco.util.ComponentManager.findFirst(b);return a};
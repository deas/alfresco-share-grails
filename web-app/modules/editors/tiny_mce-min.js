Alfresco.util.RichEditorManager.addEditor("tinyMCE",function(k,r){var f;return({init:function m(w,v){v.mode="exact";v.relative_urls=false;v.elements=w;if(v.formats==null){v.formats={}}v.formats.forecolor={inline:"font",attributes:{color:"%value"}};v.formats.fontname={inline:"font",attributes:{face:"%value"}};v.formats.fontsize={inline:"font",attributes:{size:"%value"}};v.formats.fontsize_class={inline:"font",attributes:{"class":"%value"}};v.font_size_style_values="1,2,3,4,5,6,7";var t=v.theme_advanced_buttons1;if(t!=null){if(t.indexOf("underline")!=-1){t=t.replace("underline","")}if(t.indexOf("|,justifyleft,justifycenter,justifyright,justifyfull,|")!=-1){t=t.replace("|,justifyleft,justifycenter,justifyright,justifyfull,|","|")}else{if(t.indexOf("justifyleft")!=-1){t=t.replace("justifyleft","")}if(t.indexOf("justifycenter")!=-1){t=t.replace("justifycenter","")}if(t.indexOf("justifyright")!=-1){t=t.replace("justifyright","")}if(t.indexOf("justifyfull")!=-1){t=t.replace("justifyfull","")}}v.theme_advanced_buttons1=t}var u=v.extended_valid_elements;u=(u&&u!="")?(u=","+u):"";v.extended_valid_elements=u+"embed[src|type|width|height|flashvars|wmode]";v.plugins=(v.plugins&&v.plugins!="")?v.plugins+", safari":"safari";if(!v.init_instance_callback){v.init_instance_callback=function(x){return function(y){YAHOO.Bubbling.fire("editorInitialized",x)}}(this)}f=new tinymce.Editor(w,v);return this},getEditor:function a(){return f},clear:function e(){YAHOO.util.Dom.get(f.id).value="";f.setContent("")},render:function h(){f.render()},execCommand:"execCommand",disable:function j(){f.hide()},enable:function s(){f.show()},focus:function d(){f.focus()},getContent:function i(){return f.getContent()},setContent:function p(t){f.setContent(t)},save:function n(){f.save()},getContainer:function b(){return f.editorId+"_tbl"},activateButton:function g(t){f.controlManager.setActive(t,true)},deactivateButton:function q(t){f.controlManager.setActive(t,false)},isDirty:function o(){return f.isDirty()},clearDirtyFlag:function c(){f.isNotDirty=1},addPageUnloadBehaviour:function l(t,u){window.onbeforeunload=function(v){if(YAHOO.lang.isFunction(u)&&u()){var v=v||window.event;if(f.isDirty()){if(v){v.returnValue=t}return t}}}}})});